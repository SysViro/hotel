<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Prices;

class PricesSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        // На всякий случай отключим проверку времени
        set_time_limit(0);
        $dates = [
            ['23.07.2020', '11.08.2020'],
            ['12.08.2020', '15.08.2020'],
            ['16.08.2020', '17.08.2020'],
            ['18.08.2020', '22.08.2020'],
            ['23.08.2020', '31.08.2020'],
            ['01.09.2020', '10.09.2020'],
            ['11.09.2020', '13.09.2020'],
            ['14.09.2020', '23.09.2020'],
            ['24.09.2020', '27.09.2020'],
            ['28.09.2020', '11.10.2020'],
            ['12.10.2020', '10.12.2020'],
        ];
        $data = [
            [
                'room_id' => 1,
                'variants' => [
                    [
                        'adults' => 1,
                        'children' => 0,
                        'prices' => [17860, 15770, 14820, 13680, 10355, 8075, 10355, 7505, 12255, 7505, 6365],
                    ],
                    [
                        'adults' => 2,
                        'children' => 0,
                        'prices' => [19000, 16910, 15960, 14820, 11495, 9215, 11495, 8645, 13395, 8645, 7505],
                    ],
                    [
                        'adults' => 1,
                        'children' => 1,
                        'prices' => [18610, 16520, 15570, 14430, 11105, 8825, 11105, 8255, 13005, 8255, 7115],
                    ],
                    [
                        'adults' => 1,
                        'children' => 2,
                        'prices' => [19360, 17270, 16320, 15180, 11855, 9575, 11855, 9005, 13755, 9005, 7865],
                    ],
                    [
                        'adults' => 2,
                        'children' => 1,
                        'prices' => [19750, 17660, 16710, 15570, 12245, 9965, 12245, 9395, 14145, 9395, 8255],
                    ],
                    [
                        'adults' => 2,
                        'children' => 2,
                        'prices' => [20500, 18410, 17460, 16320, 12995, 10715, 12995, 10145, 14895, 10145, 9005],
                    ],
                    [
                        'adults' => 3,
                        'children' => 0,
                        'prices' => [22000, 19910, 18960, 17820, 14495, 12215, 14495, 11645, 16395, 11645, 10505],
                    ],
                ],
            ],
            [
                'room_id' => 2,
                'variants' => [
                    [
                        'adults' => 1,
                        'children' => 0,
                        'prices' => [17860, 15770, 14820, 13680, 10355, 8075, 10355, 7505, 12255, 7505, 6365],
                    ],
                    [
                        'adults' => 2,
                        'children' => 0,
                        'prices' => [19000, 16910, 15960, 14820, 11495, 9215, 11495, 8645, 13395, 8645, 7505],
                    ],
                    [
                        'adults' => 1,
                        'children' => 1,
                        'prices' => [18610, 16520, 15570, 14430, 11105, 8825, 11105, 8255, 13005, 8255, 7115],
                    ],
                    [
                        'adults' => 1,
                        'children' => 2,
                        'prices' => [19360, 17270, 16320, 15180, 11855, 9575, 11855, 9005, 13755, 9005, 7865],
                    ],
                    [
                        'adults' => 2,
                        'children' => 1,
                        'prices' => [19750, 17660, 16710, 15570, 12245, 9965, 12245, 9395, 14145, 9395, 8255],
                    ],
                    [
                        'adults' => 2,
                        'children' => 2,
                        'prices' => [20500, 18410, 17460, 16320, 12995, 10715, 12995, 10145, 14895, 10145, 9005],
                    ],
                    [
                        'adults' => 3,
                        'children' => 0,
                        'prices' => [22000, 19910, 18960, 17820, 14495, 12215, 14495, 11645, 16395, 11645, 10505],
                    ],
                ],
            ],
            [
                'room_id' => 3,
                'variants' => [
                    [
                        'adults' => 1,
                        'children' => 0,
                        'prices' => [22115, 20025, 19075, 17935, 14610, 12330, 14610, 11760, 16510, 11760, 10620],
                    ],
                    [
                        'adults' => 2,
                        'children' => 0,
                        'prices' => [23615, 21525, 20575, 19435, 16110, 13830, 16110, 13260, 18010, 13260, 12120],
                    ],
                    [
                        'adults' => 1,
                        'children' => 1,
                        'prices' => [21365, 19275, 18325, 17185, 13860, 11580, 13860, 11010, 15760, 11010, 9870],
                    ],
                    [
                        'adults' => 1,
                        'children' => 2,
                        'prices' => [23615, 21525, 20575, 19435, 16110, 13830, 16110, 13260, 18010, 13260, 12120],
                    ],
                    [
                        'adults' => 2,
                        'children' => 1,
                        'prices' => [21755, 19665, 18715, 17575, 14250, 11970, 14250, 11400, 16150, 11400, 10260],
                    ],
                    [
                        'adults' => 2,
                        'children' => 2,
                        'prices' => [24755, 22665, 21715, 20575, 17250, 14970, 17250, 14400, 19150, 14400, 13260],
                    ],
                    [
                        'adults' => 3,
                        'children' => 0,
                        'prices' => [21755, 19665, 18715, 17575, 14250, 11970, 14250, 11400, 16150, 11400, 10260],
                    ],
                ],
            ],
            [
                'room_id' => 4,
                'variants' => [
                    [
                        'adults' => 1,
                        'children' => 0,
                        'prices' => [22115, 20025, 19075, 17935, 14610, 12330, 14610, 11760, 16510, 11760, 10620],
                    ],
                    [
                        'adults' => 2,
                        'children' => 0,
                        'prices' => [23615, 21525, 20575, 19435, 16110, 13830, 16110, 13260, 18010, 13260, 12120],
                    ],
                    [
                        'adults' => 1,
                        'children' => 1,
                        'prices' => [21365, 19275, 18325, 17185, 13860, 11580, 13860, 11010, 15760, 11010, 9870],
                    ],
                    [
                        'adults' => 1,
                        'children' => 2,
                        'prices' => [23615, 21525, 20575, 19435, 16110, 13830, 16110, 13260, 18010, 13260, 12120],
                    ],
                    [
                        'adults' => 2,
                        'children' => 1,
                        'prices' => [21755, 19665, 18715, 17575, 14250, 11970, 14250, 11400, 16150, 11400, 10260],
                    ],
                    [
                        'adults' => 2,
                        'children' => 2,
                        'prices' => [24755, 22665, 21715, 20575, 17250, 14970, 17250, 14400, 19150, 14400, 13260],
                    ],
                    [
                        'adults' => 3,
                        'children' => 0,
                        'prices' => [21755, 19665, 18715, 17575, 14250, 11970, 14250, 11400, 16150, 11400, 10260],
                    ],
                ],
            ],
            [
                'room_id' => 5,
                'variants' => [
                    [
                        'adults' => 1,
                        'children' => 0,
                        'prices' => [22515, 20425, 19475, 18335, 15010, 12730, 15010, 12160, 16910, 12160, 11020],
                    ],
                    [
                        'adults' => 2,
                        'children' => 0,
                        'prices' => [23655, 21565, 20615, 19475, 16150, 13870, 16150, 13300, 18050, 13300, 12160],
                    ],
                    [
                        'adults' => 1,
                        'children' => 1,
                        'prices' => [22515, 20425, 19475, 18335, 15010, 12730, 15010, 12160, 16910, 12160, 11020],
                    ],
                    [
                        'adults' => 1,
                        'children' => 2,
                        'prices' => [25515, 23425, 22475, 21335, 18010, 15730, 18010, 15160, 19910, 15160, 14020],
                    ],
                    [
                        'adults' => 2,
                        'children' => 1,
                        'prices' => [22515, 20425, 19475, 18335, 15010, 12730, 15010, 12160, 16910, 12160, 11020],
                    ],
                    [
                        'adults' => 2,
                        'children' => 2,
                        'prices' => [25515, 23425, 22475, 21335, 18010, 15730, 18010, 15160, 19910, 15160, 14020],
                    ]
                ],
            ]
        ];
        foreach($data as $room){
            foreach($room['variants'] as $variant){
                $array_data = [];
                foreach($variant['prices'] as $key => $price){
                    $beginDate = strtotime($dates[$key][0]);
                    $endDate = strtotime($dates[$key][1]);
                    while($beginDate <= $endDate){
                        array_push($array_data, [
                            'room_id' => $room['room_id'],
                            'adults' => $variant['adults'],
                            'children' => $variant['children'],
                            'price' => $price,
                            'date' => date('Y-m-d', $beginDate)
                        ]);
                        $beginDate += 86400;
                    }
                }
                Prices::insert($array_data);
            }
        }


    }
}

















